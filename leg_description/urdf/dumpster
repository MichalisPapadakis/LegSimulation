
<!-- <xacro:property name="connectorL_2" value="0.030" /> -->



<!-- Knee -->
<xacro:property name="knee_gearD" value="0.05" />

<!-- foot -->
<xacro:property name="legD" value="0.045" />









<!-- "actuator_offset_from_peripheral_connector" -> AOFPC -->
<xacro:property name="AOFPC" value="${actuator_diameter/2+connectorL_1}" />
<xacro:property name="actuator3_wt_connectorL" value="${actuator_cylinder_width+connectorL_2+actuator_nudge}" />


<!-- Link2 -->
<xacro:property name="link1_2D" value="0.089" />

<!-- Link3 -->
<xacro:property name="link2_3D" value="0.337" />
<xacro:property name="link3_angle_limit" value="2.15" />
<xacro:property name="link3_ED" value="0.369" />
<xacro:property name="footD" value="0.050" />







  <!-- Link 3  -->
<link name="link3">
  <visual>
    <geometry>      
        <mesh scale=".001 .001 .001" filename="package://leg_description/meshes/link3.STL" />
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <material name="grey"/>
  </visual>
  <collision name="link3_leg">
    <geometry>
      <cylinder radius="${legD/2}" length="${link3_ED- (footD/2) }"/>
    </geometry>
    <origin rpy="0 ${pi/2} 0" xyz="${( link3_ED- footD/2 )/2  } 0 0"/>
  </collision>
  <collision name="link3_knee">
    <geometry>
      <cylinder radius="${knee_gearD/2}" length="${legD }"/>    
    </geometry>
    <origin rpy="0 0 0" xyz="0 0 0"/>
  </collision>
  <collision name="link3_foot">
    <geometry>
      <sphere radius="${footD/2}"/>
    </geometry>
    <origin rpy="0 0 0" xyz="${ link3_ED- footD/2  } 0 0"/>
  </collision>
  <xacro:default_inertial mass="10" xl="1" yl="1" zl="1">
    <origin rpy="0 0 0" xyz="${link3_ED/2} 0 0" />
  </xacro:default_inertial>
</link>

<joint name="link2_to_link3" type="revolute"> 
  <parent link="link2"/>
  <child link="link3"/>
  <axis rpy = "0 0 0" xyz="0 0 1"/>
  <origin rpy = "0 0 0" xyz="${link2_3D} 0  0"/>
  <limit lower="${-link3_angle_limit}" upper="${link3_angle_limit}" effort="${effort_limit}" velocity="${velocity_limit}" />

</joint> 

<transmission name="link2_link3_trans">
    <type>transmission_interface/SimpleTransmission</type>
    <actuator name="$motor3">
      <mechanicalReduction>10</mechanicalReduction>
    </actuator>
    <joint name="link2_to_link3">
      <hardwareInterface>hardware_interface/EffortJointInterface</hardwareInterface>
    </joint>
  </transmission>

